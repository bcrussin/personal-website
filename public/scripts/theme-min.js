const THEME_ICON=document.getElementById("theme-icon"),DEFAULT_THEME="system",THEME_ICONS={light:"images/icons/sun.svg",dark:"images/icons/moon.svg",system:"images/icons/system.svg"};let themesData,currentTheme,systemTheme;function updateSystemTheme(){let e=window.matchMedia("(prefers-color-scheme: dark)").matches;systemTheme=e?"dark":"light","system"===currentTheme&&applyTheme(systemTheme)}function setTheme(e){let t=e;"system"===e&&(t=systemTheme),applyTheme(t),THEME_ICON&&(THEME_ICON.src=THEME_ICONS?.[e]),currentTheme=e,localStorage.setItem("theme",currentTheme)}function applyTheme(e){let t=themesData[e];Object.entries(t).forEach((([e,t])=>{document.documentElement.style.setProperty("--"+e,t)}))}function toggleTheme(){let e="system";switch(currentTheme){case"light":e="dark";break;case"system":e="light";break}setTheme(e)}updateSystemTheme(),fetch("storage/themes.json").then((e=>e.json())).then((e=>{themesData=e,setTheme(localStorage.getItem("theme")??"system"),setTimeout((()=>document.documentElement.style.setProperty("--theme-transition-duration","0.2s")),50)})),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",updateSystemTheme);