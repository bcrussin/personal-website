const FADE_TIMER=250,FADE_DELAY=300,navbar=document.getElementById("navbar"),navbarBlurs=document.querySelectorAll(".navbar .hide-background"),title=document.getElementById("title"),subtitle=document.getElementById("subtitle"),socialButtons=document.getElementById("social-buttons"),learnMore=document.getElementById("learn-more"),mainSection=document.getElementById("main-content"),themeIcon=document.getElementById("theme-icon"),BACKGROUND=document.getElementById("background-canvas"),BACKGROUND_NAVBAR=document.getElementById("background-canvas-navbar"),BG=BACKGROUND.getContext("2d"),BG_NAV=BACKGROUND_NAVBAR.getContext("2d"),BUFFER_CANVAS=document.createElement("canvas"),BUFFER=BUFFER_CANVAS.getContext("2d"),LIGHT_TEXT="#e0e0e0",DARK_TEXT="#131313";let windowHeight,fadeQueue,tagsData,mouseX=0,mouseY=0,isTouchDevice=!1;function calculateHeaderSize(){let e=Math.min(window.innerHeight-navbar.clientHeight,1200);document.getElementById("home").style.minHeight=e+"px"}function startFaded(){for(elem of(fadeQueue=[title,subtitle,socialButtons,learnMore],fadeQueue))elem.classList.add("transparent")}function fadeIn(){fadeQueue.forEach(((e,t)=>{setTimeout((()=>{e.classList.remove("transparent"),e.classList.add("header-animation")}),300*t)}))}function populatePortfolio(){function e(e){let t=document.createElement("div");t.classList.add("portfolio-item","orange-border");let n=document.createElement("img");n.alt="",n.src=e.image,t.appendChild(n);let a=document.createElement("div");a.classList.add("portfolio-summary"),t.appendChild(a);let o=document.createElement("h2");o.innerHTML=e.title,a.appendChild(o);let l=document.createElement("div");l.classList.add("tags-list");for(let t of e.tags){let e=document.createElement("span");e.classList.add("tag"),e.innerHTML=t,e.style.backgroundColor=tagsData?.[t]?.color??"lightgray",e.style.color=tagsData?.[t]?.isTextLight?"#e0e0e0":"#131313",l.appendChild(e)}a.appendChild(l);let i=document.createElement("div");i.classList.add("portfolio-description");for(let t of e.description){let e=document.createElement("p");e.innerHTML=t,i.appendChild(e)}a.appendChild(i);let r=document.createElement("div");r.classList.add("portfolio-links"),a.appendChild(r);let c=document.createElement("ul");r.appendChild(c);for(let t of e.links){let e=document.createElement("li"),n=document.createElement("a");n.innerHTML=t.label,n.href=t.href,n.target="_blank",e.appendChild(n),c.appendChild(e)}return t}fetch("storage/portfolio.json").then((e=>e.json())).then((t=>{for(project of t){document.getElementById("portfolio-container").appendChild(e(project))}}))}document.addEventListener("pointermove",(e=>{"mouse"==e.pointerType?(mouseX=e.clientX,mouseY=e.clientY):isTouchDevice=!0})),startFaded(),window.onload=()=>{calculateHeaderSize(),fadeIn(),fetch("storage/tags.json").then((e=>e.json())).then((e=>{tagsData=e,populatePortfolio()}))};const SCROLL_Y_MAX=140,START_FADE_OPACITY=.4,END_FADE_OPACITY=0,START_BG_OPACITY=0,END_BG_OPACITY=1;function scrollToElem(e){let t=document.querySelector(e);mainSection.scrollTo({top:t.getBoundingClientRect().top+mainSection.scrollTop-navbar.clientHeight,behavior:"smooth"})}function fadeNavbarBackground(){if(mainSection.scrollTop>140)return BACKGROUND_NAVBAR.style.opacity=0,void navbar.style.setProperty("--backdrop-filter-opacity",1);let e=Math.min(mainSection.scrollTop,140),t=mapToRange(e,0,140,.4,0),n=mapToRange(e,0,140,0,1);BACKGROUND_NAVBAR.style.opacity=t,navbar.style.setProperty("--backdrop-filter-opacity",n)}mainSection.addEventListener("scroll",(e=>{fadeNavbarBackground()})),fadeNavbarBackground();const DEFAULT_THEME="dark",THEME_ICONS={light:"images/icons/sun.svg",dark:"images/icons/moon.svg"};let themesData,currentTheme;function applyTheme(e){let t=themesData[e];Object.entries(t).forEach((([e,t])=>{document.documentElement.style.setProperty("--"+e,t)})),themeIcon.src=THEME_ICONS?.[e],currentTheme=e,localStorage.setItem("theme",currentTheme)}function toggleTheme(){applyTheme("dark"==currentTheme?"light":"dark")}fetch("storage/themes.json").then((e=>e.json())).then((e=>{themesData=e,applyTheme(localStorage.getItem("theme")??"dark"),setTimeout((()=>document.documentElement.style.setProperty("--theme-transition-duration","0.2s")),50)}));let gap=20;const HOVER_EFFECT_DURATION=14,HOVER_EFFECT_STRENGTH=1;let hoverEffectTimer=0,useHoverEffect=!1;function handleHoverEffects(e){useHoverEffect=null!==e.target.closest("a")}function resizeCanvas(){BACKGROUND.width=BACKGROUND.clientWidth,BACKGROUND.height=BACKGROUND.clientHeight,BACKGROUND_NAVBAR.width=BACKGROUND.clientWidth,BACKGROUND_NAVBAR.height=BACKGROUND.clientHeight}document.addEventListener("mouseover",(e=>handleHoverEffects(e))),document.addEventListener("mousedown",(e=>handleHoverEffects(e))),document.addEventListener("mouseup",(e=>{useHoverEffect=!1})),addEventListener("resize",(()=>{resizeCanvas()})),resizeCanvas();let dots=[];function initBackground(){BUFFER_CANVAS.width=10,BUFFER_CANVAS.height=10,dots=[];for(let e=0;e<BACKGROUND.width/gap;e++){dots.push([]);for(let t=0;t<BACKGROUND.height/gap;t++)dots[e].push({})}mouseX=null,mouseY=null,requestAnimationFrame(updateBackground)}function updateBackground(){let e=BACKGROUND.width,t=BACKGROUND.height;BUFFER.fillStyle="white",BUFFER.beginPath(),BUFFER.arc(BUFFER_CANVAS.width/2,BUFFER_CANVAS.height/2,BUFFER_CANVAS.width/2,0,2*Math.PI),BUFFER.fill(),BG.clearRect(0,0,e,t);for(let n=0;n<e/gap;n++)for(let e=0;e<t/gap;e++){let t=.15,a=.2,o=5,l=n*gap+0,i=e*gap+0;mapToRange(Math.min(Math.max(i,60),180),60,180,a,1);t=scaleToHover(t,1,1,0);let r=a,c=l,d=i,s=o,m=dots[n][e];if(null==m.x||null==m.y)m.x=c,m.y=d,m.size=s,m.alpha=r;else{let e,t=useHoverEffect?2:12,n=2;e=s>m.size?n:t,m.x+=(c-m.x)/e,m.y+=(d-m.y)/e,m.size+=(s-m.size)/e,m.alpha+=(r-m.alpha)/(e/2)}BG.font=`${m.size}px serif`,BG.fillStyle=`rgba(0, 0, 0, ${m.alpha})`,BG.globalAlpha=m.alpha,BG.drawImage(BUFFER_CANVAS,m.x-s/2,m.y-s/2,s,s)}BG_NAV.clearRect(0,0,e,t),BG_NAV.drawImage(BACKGROUND,0,0),useHoverEffect&&hoverEffectTimer<14?hoverEffectTimer+=(14-hoverEffectTimer)/14:!useHoverEffect&&hoverEffectTimer>0&&(hoverEffectTimer+=(0-hoverEffectTimer)/14)}function scaleToHover(e,t,n,a){return e+e*mapToRange(hoverEffectTimer,0,14,n??0,a??1*t)}function mapToRange(e,t,n,a,o){return(e-t)*(o-a)/(n-t)+a}