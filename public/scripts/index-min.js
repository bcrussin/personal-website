const FADE_TIMER=250,FADE_DELAY=300,NAVBAR=document.getElementById("navbar"),NAVBAR_BLURS=document.querySelectorAll(".navbar .hide-background"),TITLE=document.getElementById("title"),SUBTITLE=document.getElementById("subtitle"),SOCIAL_BUTTONS=document.getElementById("social-buttons"),LEARN_MORE=document.getElementById("learn-more"),MAIN_SECTION=document.getElementById("main-content"),NAV_MENU=document.getElementById("nav-container"),NAV_MENU_ICON=document.getElementById("nav-menu-icon"),THEME_ICON=document.getElementById("theme-icon"),BACKGROUND=document.getElementById("background-canvas"),BACKGROUND_NAVBAR=document.getElementById("background-canvas-navbar"),BG=BACKGROUND.getContext("2d"),BG_NAV=BACKGROUND_NAVBAR.getContext("2d"),BUFFER_CANVAS=document.createElement("canvas"),BUFFER=BUFFER_CANVAS.getContext("2d"),LIGHT_TEXT="#e0e0e0",DARK_TEXT="#131313";let windowHeight,fadeQueue,tagsData,mouseX=0,mouseY=0,isTouchDevice=!1;function calculateHeaderSize(){let e=Math.min(window.innerHeight-NAVBAR.clientHeight,1200);document.getElementById("home").style.minHeight=e+"px"}function startFaded(){for(elem of(fadeQueue=[TITLE,SUBTITLE,SOCIAL_BUTTONS,LEARN_MORE],fadeQueue))elem.classList.add("transparent")}function fadeIn(){fadeQueue.forEach(((e,t)=>{setTimeout((()=>{e.classList.remove("transparent"),e.classList.add("header-animation")}),300*t)}))}function populatePortfolio(){function e(e){let t=document.createElement("div");t.classList.add("portfolio-item","orange-border");let n=document.createElement("img");n.alt="",n.src=e.image,t.appendChild(n);let a=document.createElement("div");a.classList.add("portfolio-summary"),t.appendChild(a);let o=document.createElement("h2");o.innerHTML=e.title,a.appendChild(o);let s=document.createElement("div");s.classList.add("tags-list");for(let t of e.tags){let e=document.createElement("span");e.classList.add("tag"),e.innerHTML=t,e.style.backgroundColor=tagsData?.[t]?.color??"lightgray",e.style.color=tagsData?.[t]?.isTextLight?"#e0e0e0":"#131313",s.appendChild(e)}a.appendChild(s);let l=document.createElement("div");l.classList.add("portfolio-description");for(let t of e.description){let e=document.createElement("p");e.innerHTML=t,l.appendChild(e)}a.appendChild(l);let r=document.createElement("div");r.classList.add("portfolio-links"),a.appendChild(r);let i=document.createElement("ul");r.appendChild(i);for(let t of e.links){let e=document.createElement("li"),n=document.createElement("a");n.innerHTML=t.label,n.href=t.href,n.target="_blank",t?.primary&&n.classList.add("primary"),e.appendChild(n),i.appendChild(e)}return t}fetch("storage/portfolio.json").then((e=>e.json())).then((t=>{for(project of t){document.getElementById("portfolio-container").appendChild(e(project))}}))}document.addEventListener("pointermove",(e=>{"mouse"==e.pointerType?(mouseX=e.clientX,mouseY=e.clientY):isTouchDevice=!0})),startFaded(),window.onload=()=>{calculateHeaderSize(),toggleNavMenu(!1),fadeIn(),fetch("storage/tags.json").then((e=>e.json())).then((e=>{tagsData=e,populatePortfolio()}))};const SCROLL_Y_MAX=140,START_FADE_OPACITY=.4,END_FADE_OPACITY=0,START_BG_OPACITY=0,END_BG_OPACITY=1;function scrollToElem(e){this.toggleNavMenu(!1);let t=document.querySelector(e);MAIN_SECTION.scrollTo({top:t.getBoundingClientRect().top+MAIN_SECTION.scrollTop-NAVBAR.clientHeight,behavior:"smooth"})}function fadeNavbarBackground(){let e=MAIN_SECTION.scrollTop,t=1;MAIN_SECTION.scrollTop<140&&(t=mapToRange(e,0,140,0,1));let n=1,a=100;MAIN_SECTION.scrollTop<560&&(n=mapToRange(e,0,560,0,1),a=mapToRange(e,0,560,150,100)),NAVBAR.style.setProperty("--backdrop-filter-opacity",t),NAVBAR.style.setProperty("--navbar-opacity-percent",100*n+"%"),NAVBAR.style.setProperty("--navbar-logo-height",a+"%")}MAIN_SECTION.addEventListener("scroll",(e=>{fadeNavbarBackground()})),fadeNavbarBackground();const DEFAULT_THEME="dark",THEME_ICONS={light:"images/icons/sun.svg",dark:"images/icons/moon.svg",system:"images/icons/system.svg"},NAV_MENU_ICONS={open:"images/icons/close.svg",closed:"images/icons/menu.svg"};let themesData,currentTheme,systemTheme;function updateSystemTheme(){let e=window.matchMedia("(prefers-color-scheme: dark)").matches;systemTheme=e?"dark":"light","system"===currentTheme&&applyTheme(systemTheme)}function setTheme(e){let t=e;"system"===e&&(t=systemTheme),applyTheme(t),THEME_ICON.src=THEME_ICONS?.[e],currentTheme=e,localStorage.setItem("theme",currentTheme)}function applyTheme(e){let t=themesData[e];Object.entries(t).forEach((([e,t])=>{document.documentElement.style.setProperty("--"+e,t)}))}function toggleTheme(){let e="system";switch(currentTheme){case"light":e="dark";break;case"system":e="light";break}setTheme(e)}function toggleNavMenu(e){let t;switch(e){case!0:NAV_MENU.classList.add("open"),t=NAV_MENU_ICONS.open;break;case!1:NAV_MENU.classList.remove("open"),t=NAV_MENU_ICONS.closed;break;default:NAV_MENU.classList.toggle("open");let e=NAV_MENU.classList.contains("open")?"open":"closed";t=NAV_MENU_ICONS[e]}NAV_MENU_ICON.animate([{transform:"rotateX(0)"},{transform:"rotateX(180deg)"}],{duration:200,iterations:1}),setTimeout((()=>NAV_MENU_ICON.src=t),100)}fetch("storage/themes.json").then((e=>e.json())).then((e=>{themesData=e,setTheme(localStorage.getItem("theme")??"dark"),setTimeout((()=>document.documentElement.style.setProperty("--theme-transition-duration","0.2s")),50)})),updateSystemTheme(),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",updateSystemTheme);let gap=20;const HOVER_EFFECT_DURATION=14,HOVER_EFFECT_STRENGTH=1;let hoverEffectTimer=0,useHoverEffect=!1;function handleHoverEffects(e){useHoverEffect=null!==e.target.closest("a")}function resizeCanvas(){BACKGROUND.width=BACKGROUND.clientWidth,BACKGROUND.height=BACKGROUND.clientHeight,BACKGROUND_NAVBAR.width=BACKGROUND.clientWidth,BACKGROUND_NAVBAR.height=BACKGROUND.clientHeight}document.addEventListener("mouseover",(e=>handleHoverEffects(e))),document.addEventListener("mousedown",(e=>handleHoverEffects(e))),document.addEventListener("mouseup",(e=>{useHoverEffect=!1})),addEventListener("resize",(()=>{resizeCanvas()})),resizeCanvas();let dots=[];function initBackground(){BUFFER_CANVAS.width=10,BUFFER_CANVAS.height=10,dots=[];for(let e=0;e<BACKGROUND.width/gap;e++){dots.push([]);for(let t=0;t<BACKGROUND.height/gap;t++)dots[e].push({})}mouseX=null,mouseY=null,requestAnimationFrame(updateBackground)}function updateBackground(){let e=BACKGROUND.width,t=BACKGROUND.height;BUFFER.fillStyle="white",BUFFER.beginPath(),BUFFER.arc(BUFFER_CANVAS.width/2,BUFFER_CANVAS.height/2,BUFFER_CANVAS.width/2,0,2*Math.PI),BUFFER.fill(),BG.clearRect(0,0,e,t);for(let n=0;n<e/gap;n++)for(let e=0;e<t/gap;e++){let t=.15,a=.2,o=5,s=n*gap+0,l=e*gap+0;mapToRange(Math.min(Math.max(l,60),180),60,180,a,1);t=scaleToHover(t,1,1,0);let r=a,i=s,c=l,d=o,m=dots[n][e];if(null==m.x||null==m.y)m.x=i,m.y=c,m.size=d,m.alpha=r;else{let e,t=useHoverEffect?2:12,n=2;e=d>m.size?n:t,m.x+=(i-m.x)/e,m.y+=(c-m.y)/e,m.size+=(d-m.size)/e,m.alpha+=(r-m.alpha)/(e/2)}BG.font=`${m.size}px serif`,BG.fillStyle=`rgba(0, 0, 0, ${m.alpha})`,BG.globalAlpha=m.alpha,BG.drawImage(BUFFER_CANVAS,m.x-d/2,m.y-d/2,d,d)}BG_NAV.clearRect(0,0,e,t),BG_NAV.drawImage(BACKGROUND,0,0),useHoverEffect&&hoverEffectTimer<14?hoverEffectTimer+=(14-hoverEffectTimer)/14:!useHoverEffect&&hoverEffectTimer>0&&(hoverEffectTimer+=(0-hoverEffectTimer)/14)}function scaleToHover(e,t,n,a){return e+e*mapToRange(hoverEffectTimer,0,14,n??0,a??1*t)}function mapToRange(e,t,n,a,o){return(e-t)*(o-a)/(n-t)+a}